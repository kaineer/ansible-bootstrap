- name: Create directory for vim-plug
  file:
    path: "{{ lookup('env', 'HOME') }}/.local/share/nvim/site/autoload"
    state: directory
- name: Setup vim-plug
  get_url:
    url: https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
    dest: "{{ lookup('env', 'HOME') }}/.local/share/nvim/site/autoload/plug.nvim"

- name: Clone settings repository
  git:
    repo: https://github.com/kaineer/nvim-config.git
    dest: "{{ lookup('env', 'HOME') }}/git/config/nvim"

- name: Create directory for link
  file:
    path: "{{ lookup('env', 'HOME') }}/.config/nvim"
    state: directory

- name: Copy link
  copy:
    src: "{{ lookup('env', 'HOME') }}/git/ansible-bootstrap/files/init.vim"
    dest: "{{ lookup('env', 'HOME') }}/.config/nvim/init.vim"

- name: Install vim plugins
  shell:
    cmd: "vim --headless +'PlugInstall --sync' +qa"
